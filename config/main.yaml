# Mihomo ä¸»é…ç½®æ–‡ä»¶

# å…¨å±€é…ç½®
# å¯ç”¨ TUN æ¨¡å¼ï¼ˆé€æ˜ä»£ç†ï¼‰ï¼Œæ‰€æœ‰æµé‡ç”±è™šæ‹Ÿç½‘å¡è‡ªåŠ¨æ¥ç®¡ï¼Œ
# ä¼ ç»Ÿä»£ç†ç«¯å£ï¼ˆHTTP/SOCKSï¼‰å·²æ— å¿…è¦ï¼Œå…¨éƒ¨è®¾ä¸º 0 ç¦ç”¨ã€‚
# è‹¥éœ€ä¸´æ—¶è°ƒè¯•è§„åˆ™æˆ–å…±äº«ä»£ç†ç»™å…¶ä»–è®¾å¤‡ï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨ mixed-port å¹¶é‡è½½ã€‚
port: 0
socks-port: 0
mixed-port: 0
allow-lan: false
bind-address: "*"
ipv6: false
mode: rule
log-level: info
# æ—¥å¿—è¾“å‡ºä¸ºæ–‡ä»¶æš‚æ— æ–¹æ³•
# log-output: ./logs/mihomo.log
tcp-concurrent: true
unified-delay: true
global-client-fingerprint: chrome

# GEOIP æ•°æ®æ¨¡å¼
# æ›´æ”¹ geoip ä½¿ç”¨æ–‡ä»¶ï¼Œmmdb æˆ–è€… dat
# å¯é€‰ true/false,trueä¸º datï¼Œæ­¤é¡¹æœ‰é»˜è®¤å€¼ false
geodata-mode: true
# GEO æ–‡ä»¶åŠ è½½æ¨¡å¼ï¼Œmemconservativeï¼šä¸“ä¸ºå†…å­˜å—é™ (å°å†…å­˜) è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨ (é»˜è®¤å€¼)
geodata-loader: standard 
geo-auto-update: true
geo-update-interval: 6 # æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºå°æ—¶
geox-url:
  geosite: "https://github.com/v2fly/domain-list-community/releases/latest/download/dlc.dat"

# å¤–éƒ¨æ§åˆ¶å™¨é…ç½® (zashboard)
external-controller: 127.0.0.1:9090
secret: ""  # å¯†ç ç•™ç©º
external-ui: ./ui
external-ui-name: zashboard
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist-no-fonts.zip"

# é…ç½®æ–‡ä»¶å­˜å‚¨
profile:
  store-selected: true
  store-fake-ip: true

# å¥åº·æ£€æŸ¥æ¨¡æ¿ [æ¯ 12h æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 300 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
# å¸¸ç”¨å¥åº·æ£€æŸ¥ URLs:
# 1. https://www.gstatic.com/generate_204             Google æä¾›
# 2. https://cp.cloudflare.com/generate_204           Cloudflare æä¾›
# 3. https://www.msftconnecttest.com/connecttest.txt  Microsoft æä¾›
# 4. https://captive.apple.com/hotspot-detect.html    Apple æä¾›
RemoteProviderTemplate: &Remote {type: http, interval: 43200, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}}
LocalProviderTemplate: &Local {type: file, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}}

# è®¢é˜…åˆé›†
# refer to https://github.com/MetaCubeX/mihomo/discussions/2433#discussioncomment-15265377
proxy-providers:
  Airport1: # åç§°å¯è‡ªå®šä¹‰
    url: 'æ­¤å¤„å¡«å…¥ä½ çš„è®¢é˜…é“¾æ¥ï¼ˆæ³¨æ„å¿…é¡»æ˜¯éé˜…åå³ç„šç±»å‹ï¼‰'
    <<: *Remote
    path: './proxy_provider/airport1.yaml'

  # è¯»å–æœ¬åœ°é…ç½®
  # Airport2:
  #   <<: *Local
  #   path: './proxy_provider/airport2.yaml'

# TUN é…ç½®
tun:
  enable: true
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  device: Mihomo
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true # å¯ç”¨ä¸¥æ ¼è·¯ç”±

# DNS é…ç½®
dns:
  enable: true
  reject-private: true   # è‡ªåŠ¨ä¸¢å¼ƒè§£æåˆ°ç§æœ‰ IP / ä¿ç•™åœ°å€çš„ç»“æœ
  cache-algorithm: arc
  prefer-h3: false
  listen: 0.0.0.0:1053
  ipv6: false
  use-hosts: true
  respect-rules: true    # dns è¿æ¥éµå®ˆè·¯ç”±è§„åˆ™ï¼Œéœ€é…ç½® proxy-server-nameserverï¼Œå¼ºçƒˆä¸å»ºè®®å’Œ prefer-h3 ä¸€èµ·ä½¿ç”¨
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # fake-ip-range6: fdfe:dcba:9876::1/64
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - RULE-SET:private_domain
    - RULE-SET:fakeip_filter_domain
    - RULE-SET:cn_domain
    - RULE-SET:lan_non_ip
    - RULE-SET:cn_icp
    - geosite:private                      # ç§æœ‰/ä¿ç•™åŸŸåï¼ˆRFC1918 ç­‰ï¼‰
    - geosite:connectivity-check           # å„å¹³å°è¿é€šæ€§æ£€æµ‹åŸŸåé›†åˆ
    - geosite:cn                           # åŸºç¡€ä¸­å›½åŸŸåï¼ˆv2fly æ ‡å‡†ï¼‰
    - geosite:tld-cn                       # .cn / .ä¸­å›½ ç­‰ä¸­æ–‡é¡¶çº§åŸŸ
    - geosite:geolocation-cn               # ä¸­å›½ç«™ç‚¹
    - geosite:geolocation-!cn@cn           # å›½å¤–åˆ—è¡¨ä¸­æ ‡è®°ä¸º @cn çš„åŸŸå


  # âš ï¸ default & proxy-server é…ç½®è¯·å‹¿éšæ„æ”¹ä¸º DoH/DoQ
  # âš ï¸ å®ƒä»¬å¿…é¡»ä½¿ç”¨ UDP DNSï¼ˆå¦‚ 223.5.5.5ï¼‰ï¼š
  # âš ï¸ å› ä¸ºå¯åŠ¨æ—¶ä»£ç†æœªå°±ç»ªï¼ŒDoH/DoQ å¯èƒ½æ— æ³•è¿æ¥ï¼Œå¯¼è‡´ä»£ç†æ— æ³•å¯åŠ¨ã€‚

  # è§£æã€ŒDNS æœåŠ¡å™¨è‡ªèº«åŸŸåã€ï¼ˆå¦‚ fallback/filter ä¸­çš„åŸŸåï¼‰ï¼Œä»¥åŠ Mihomo å¯åŠ¨åˆæœŸçš„åŸºç¡€è§£æã€‚
  default-nameserver:
    - 223.5.5.5                         # é˜¿é‡Œï¼ˆUDPï¼‰
    - 119.29.29.29                      # è…¾è®¯Pod å¤‡ç”¨

  # è§£æã€Œä»£ç†æœåŠ¡å™¨åŸŸåã€ï¼Œé˜²æ­¢ nameserver æ— æ³•è®¿é—®å¯¼è‡´è¿ä¸ä¸Šä»£ç†
  proxy-server-nameserver:
    - 223.5.5.5                         # é˜¿é‡Œï¼ˆUDPï¼‰
    - 119.29.29.29                      # è…¾è®¯Pod å¤‡ç”¨
  
  # ã€Œç›´è¿ã€åŸŸåçš„è§£æ
  direct-nameserver:
    - quic://dns.alidns.com:853        # é˜¿é‡Œ DoQ
    - https://doh.pub/dns-query        # è…¾è®¯ DNSPod DoH
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ DoH
  
  # è§£ææ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•ã€ŒåŸŸåè§„åˆ™ã€çš„åŸŸåï¼Œé€šå¸¸æ˜¯å›½å¤–åŸŸåï¼Œå»ºè®®ä½¿ç”¨å›½å¤– DoH é˜²æ­¢æ±¡æŸ“ã€‚
  # ä½†è¿™ä¸ªè§£æç»“æœå¹¶ä¸ä¼šç”¨æ¥å‘èµ·è¿æ¥ï¼Œæ‰€ä»¥ä¸ºäº†è¿½æ±‚é€Ÿåº¦ä¸ä½¿ç”¨ DoH æˆ–ç›´æ¥ä½¿ç”¨å›½å†… DNS ä¹Ÿè¡Œã€‚
  # è™½ç„¶å¤§å¤šæ•°äººå¯ä»¥ç›´è¿å¢ƒå¤– DNS çš„ UDP(53)ï¼ˆ8.8.8.8 / 1.1.1.1ï¼‰
  # ä½†å¢ƒå¤– DoH/DoT/DoQ é€šå¸¸ä»ä¸å¯ç›´è¿ï¼Œå› æ­¤ä¸é€‚åˆä½œä¸ºä¸»è¦ nameserver
  # ä¿æŒå›½å†… DoQ/DoH ä½œä¸ºä¸»è§£ææœ€å¯é 
  nameserver:
    - quic://dns.alidns.com:853        # é˜¿é‡Œ DoQ
    - https://doh.pub/dns-query        # è…¾è®¯ DNSPod DoH
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ DoH
  
# âš ï¸ fallback
# ä½œç”¨ï¼šå½“ nameserver è¿”å›çš„ IP è¢«åˆ¤å®šä¸ºâ€œæ±¡æŸ“â€æˆ–â€œéç›®æ ‡åœ°åŒºâ€æ—¶ï¼Œ
# ä½¿ç”¨ fallback ä¸­çš„å¢ƒå¤– DNSï¼ˆå¦‚ Cloudflare/Googleï¼‰é‡æ–°è§£æã€‚
# å› æ­¤ï¼šé™¤éä½ ç¡®è®¤èƒ½ç¨³å®šè®¿é—®å¢ƒå¤– DoH ä¸”æœ‰æ˜ç¡®æ±¡æŸ“åœºæ™¯ï¼Œå¦åˆ™ä¿æŒ fallback æ³¨é‡ŠçŠ¶æ€
#
# fallback:
#   - https://cloudflare-dns.com/dns-query
#   - https://dns.google/dns-query
#
# fallback-filter:
#   geoip: true
#   geoip-code: CN
#   ipcidr:
#     - 240.0.0.0/4
#     - 0.0.0.0/32

# å—…æ¢é…ç½®
# ä»åŠ å¯†æµé‡ä¸­æå–çœŸå®åŸŸåï¼Œç”¨äºç²¾å‡†è·¯ç”±
sniffer:
  enable: true
  parse-pure-ip: true                 # å¯¹çº¯ IP æµé‡å°è¯•åå‘è§£æåŸŸåï¼ˆæå‡è§„åˆ™å‘½ä¸­ç‡ï¼‰
  force-dns-mapping: true             # å°†å—…æ¢åˆ°çš„åŸŸåå¼ºåˆ¶æ˜ å°„å› DNS æŸ¥è¯¢ç»“æœ
  override-destination: true          # ç”¨å—…æ¢ç»“æœè¦†ç›–åŸå§‹è¿æ¥ç›®æ ‡

  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
      override-destination: true
    QUIC:
      ports: [443, 8443]
      # QUIC å—…æ¢æ”¯æŒæœ‰é™ï¼Œä½†ä¿ç•™ä»¥å°è¯•æå– SNI

  # å¼ºåˆ¶å¯¹ä»¥ä¸‹åŸŸåå¯ç”¨å—…æ¢
  # é€šå¸¸ç”¨äºå¿…é¡»èµ°ä»£ç†çš„å¢ƒå¤–æœåŠ¡
  force-domain:
    - "+.google.com"
    - "+.youtube.com"
    - "+.ytimg.com"
    - "+.gstatic.com"
    - "+.ggpht.com"
    - "+.doubleclick.net"
    - "+.googlevideo.com"
    - "+.netflix.com"
    - "+.nflxvideo.net"
    - "+.akamaihd.net"
    - "+.v2ex.com"
    - "+.cloudflare.com"
    - "+.openai.com"
    - "+.github.com"
    - "+.githubusercontent.com"


  # è·³è¿‡å—…æ¢çš„åŸŸå
  # é€šå¸¸ç”¨äºé¿å…å¹²æ‰°ç›´è¿æœåŠ¡ã€æœ¬åœ°ç½‘ç»œæˆ–å¼•å‘è¯¯åˆ¤
  skip-domain:
    # ç³»ç»Ÿè¿é€šæ€§ / æœ¬æœºæœåŠ¡
    - "dns.msftncsi.com"
    - "www.msftconnecttest.com"
    - "www.msftncsi.com"
    - "time.windows.com"
    - "time.apple.com"

    # æœ¬åœ°ä¸å†…ç½‘
    - "+.lan"
    - "+.local"
    - "localhost"
    - "home.arpa"
    - "+.localdomain"
    - "+.localhost"


# ===============================
# èŠ‚ç‚¹ç­›é€‰é”šç‚¹
# ===============================
FilterJP: &FilterJP '^(?=.*(?:ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterKR: &FilterKR '^(?=.*(?:ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|KR))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterSG: &FilterSG '^(?=.*(?:ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterUS: &FilterUS '^(?=.*(?:ğŸ‡ºğŸ‡¸|ç¾å›½|US))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterHK: &FilterHK '^(?=.*(?:ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterTW: &FilterTW '^(?=.*(?:ğŸ‡¹ğŸ‡¼|å°æ¹¾|TW))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterIN: &FilterIN '^(?=.*(?:ğŸ‡®ğŸ‡³|å°åº¦|IN))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterUK: &FilterUK '^(?=.*(?:ğŸ‡¬ğŸ‡§|è‹±å›½|UK))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterAU: &FilterAU '^(?=.*(?:ğŸ‡¦ğŸ‡º|æ¾³å¤§åˆ©äºš|æ¾³æ´²|AU))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterAE: &FilterAE '^(?=.*(?:ğŸ‡¦ğŸ‡ª|è¿ªæ‹œ|é˜¿è”é…‹|AE))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterCH: &FilterCH '^(?=.*(?:ğŸ‡¨ğŸ‡­|ç‘å£«|è‹é»ä¸–|CH))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterDE: &FilterDE '^(?=.*(?:ğŸ‡©ğŸ‡ª|å¾·å›½|DE))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterTR: &FilterTR '^(?=.*(?:ğŸ‡¹ğŸ‡·|åœŸè€³å…¶|TR))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterMY: &FilterMY '^(?=.*(?:ğŸ‡²ğŸ‡¾|é©¬æ¥è¥¿äºš|MY))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterVN: &FilterVN '^(?=.*(?:ğŸ‡»ğŸ‡³|è¶Šå—|VN))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterTH: &FilterTH '^(?=.*(?:ğŸ‡¹ğŸ‡­|æ³°å›½|TH))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterKH: &FilterKH '^(?=.*(?:ğŸ‡°ğŸ‡­|æŸ¬åŸ”å¯¨|KH))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterPH: &FilterPH '^(?=.*(?:ğŸ‡µğŸ‡­|è²å¾‹å®¾|PH))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterID: &FilterID '^(?=.*(?:ğŸ‡®ğŸ‡©|å°åº¦å°¼è¥¿äºš|ID))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterFR: &FilterFR '^(?=.*(?:ğŸ‡«ğŸ‡·|æ³•å›½|FR))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterBR: &FilterBR '^(?=.*(?:ğŸ‡§ğŸ‡·|å·´è¥¿|BR))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterNL: &FilterNL '^(?=.*(?:ğŸ‡³ğŸ‡±|è·å…°|NL))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'

FilterMultiplier: &FilterMultiplier '(?=.*(?:0\.1å€|0\.01å€))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterStream: &FilterStream '(?=.*(?:æµåª’ä½“))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'


# ===============================
# ç­–ç•¥ç»„åŸºç¡€é…ç½®æ¨¡æ¿
# ===============================
Select: &Select {type: select, url: 'https://cp.cloudflare.com/generate_204', disable-udp: false, hidden: false, include-all: true}
# è‡ªåŠ¨é€‰æ‹© [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œå®¹å·® 50msï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
UrlTest: &UrlTest {type: url-test, url: 'https://cp.cloudflare.com/generate_204', interval: 300, lazy: true, tolerance: 50, timeout: 2000, disable-udp: false, max-failed-times: 3, hidden: true, include-all: true}
# è‡ªåŠ¨å›é€€ [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
FallBack: &FallBack {type: fallback, url: 'https://cp.cloudflare.com/generate_204', interval: 300, lazy: true, timeout: 2000, disable-udp: false, max-failed-times: 3, hidden: true, include-all: true}
# è´Ÿè½½å‡è¡¡ [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡åˆ™è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
LoadBalance: &LoadBalance {type: load-balance, url: 'https://cp.cloudflare.com/generate_204', interval: 300, lazy: true, disable-udp: false, strategy: consistent-hashing, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}

# ===============================
# ç­–ç•¥ç»„
# ===============================
proxy-groups:
  
  # ç¬¬ä¸€å±‚ï¼šAIGC
  - name: AIGC
    type: select
    icon: "../icons/Cyrene(2)_256.png"
    proxies: [è‡ªåŠ¨, æ‰‹åŠ¨,
              ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨é€‰æ‹©, ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨é€‰æ‹©,
              ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨é€‰æ‹©, ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨é€‰æ‹©,
              ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨é€‰æ‹©, ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨é€‰æ‹©]

  # ç¬¬ä¸€å±‚ï¼šä¸‹è½½ä¸“ç”¨
  - name: DOWNLOAD
    filter: *FilterMultiplier
    <<: *UrlTest

  # ç¬¬ä¸€å±‚ï¼šæµåª’ä½“ä¸“ç”¨
  - name: STREAM
    filter: *FilterStream
    <<: *UrlTest

  # ç¬¬ä¸€å±‚ï¼šå¹¿å‘Šæ‹¦æˆªç­–ç•¥
  # REJECTï¼šæ˜ç¡®æ‹’ç»ï¼Œå‘å¯¹ç«¯è¿”å›ä¸€ä¸ª RSTï¼ˆTCPï¼‰ æˆ– ICMP Port Unreachableï¼ˆUDPï¼‰ã€‚
  # REJECT-DROPï¼šç›´æ¥ä¸¢åŒ…ä¸å›åº”ï¼Œå¯¹ç«¯ä¼šè¶…æ—¶ã€‚
  - name: AdBlock
    type: select
    icon: "../icons/Evernight(1)_256.png"
    proxies: [REJECT, REJECT-DROP, DIRECT]

  # ç¬¬ä¸€å±‚ï¼šHttpDNS - DoH/DoT ç­‰ DNS æ³„æ¼é˜»æ–­
  - name: HttpDNSBlock
    icon: "../icons/Evernight(2)_256.png"
    type: select
    proxies: [REJECT, REJECT-DROP, DIRECT]

  # ç¬¬ä¸€å±‚ï¼šSTUN/WebRTC ç­‰ UDP æ³„æ¼
  - name: LeakBlock
    type: select
    icon: "../icons/March7th(5)_256.png"
    proxies: [REJECT, REJECT-DROP, DIRECT]

  # ç¬¬ä¸€å±‚ï¼šPROXY
  - name: PROXY
    type: select
    icon: "../icons/March7th(1)_256.png"
    proxies: [è‡ªåŠ¨, æ‰‹åŠ¨]
    ip-version: ipv4-prefer


  # ç¬¬äºŒå±‚ï¼šè‡ªåŠ¨ / æ‰‹åŠ¨
  - name: æ‰‹åŠ¨
    filter: '^(?!.*(å¥—é¤|å‰©ä½™)).*$'
    <<: *Select
    icon: "../icons/Stelle_256.png"

  - name: è‡ªåŠ¨
    type: select
    proxies: [è‡ªåŠ¨é€‰æ‹©, è‡ªåŠ¨å›é€€, è´Ÿè½½å‡è¡¡]
    icon: "../icons/March7th(3)_256.png"


  # ç¬¬ä¸‰å±‚: å¼•ç”¨åŸºç¡€ç»„èµ„æº
  - name: è‡ªåŠ¨é€‰æ‹©
    type: select
    icon: "../icons/March7th(7)_256.png"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨é€‰æ‹©

  - name: è‡ªåŠ¨å›é€€
    type: select
    icon: "../icons/March7th(13)_256.png"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨å›é€€
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨å›é€€
      - ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨å›é€€
      - ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨å›é€€
      - ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨å›é€€
      - ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨å›é€€
      - ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨å›é€€
      - ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨å›é€€
      - ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨å›é€€
      - ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨å›é€€
      - ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨å›é€€
      - ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨å›é€€
      - ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨å›é€€
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨å›é€€
      - ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨å›é€€
      - ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨å›é€€

  - name: è´Ÿè½½å‡è¡¡
    type: select
    icon: "../icons/March7th(15)_256.png"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ è´Ÿè½½å‡è¡¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è´Ÿè½½å‡è¡¡
      - ğŸ‡°ğŸ‡· éŸ©å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è´Ÿè½½å‡è¡¡
      - ğŸ‡ºğŸ‡¸ ç¾å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡¬ğŸ‡§ è‹±å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡«ğŸ‡· æ³•å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡©ğŸ‡ª å¾·å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡¨ğŸ‡­ ç‘å£« è´Ÿè½½å‡è¡¡
      - ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è´Ÿè½½å‡è¡¡
      - ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è´Ÿè½½å‡è¡¡
      - ğŸ‡®ğŸ‡³ å°åº¦ è´Ÿè½½å‡è¡¡
      - ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è´Ÿè½½å‡è¡¡
      - ğŸ‡»ğŸ‡³ è¶Šå— è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡­ æ³°å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è´Ÿè½½å‡è¡¡
      - ğŸ‡µğŸ‡­ è²å¾‹å®¾ è´Ÿè½½å‡è¡¡
      - ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ è´Ÿè½½å‡è¡¡
      - ğŸ‡³ğŸ‡± è·å…° è´Ÿè½½å‡è¡¡
      - ğŸ‡§ğŸ‡· å·´è¥¿ è´Ÿè½½å‡è¡¡


  # ç¬¬å››å±‚ï¼šåŸºç¡€èµ„æº
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterHK}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterJP}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterKR}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterSG}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterUS}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterUK}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterFR}
  - {name: ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterDE}
  - {name: ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterCH}
  - {name: ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterAU}
  - {name: ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterAE}
  - {name: ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterTR}
  - {name: ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterIN}
  - {name: ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterMY}
  - {name: ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterVN}
  - {name: ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterTH}
  - {name: ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterKH}
  - {name: ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterPH}
  - {name: ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterID}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterTW}
  - {name: ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterNL}
  - {name: ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterBR}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterHK}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterJP}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterKR}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterSG}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterUS}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterUK}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterFR}
  - {name: ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterDE}
  - {name: ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterCH}
  - {name: ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterAU}
  - {name: ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterAE}
  - {name: ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterTR}
  - {name: ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterIN}
  - {name: ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterMY}
  - {name: ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterVN}
  - {name: ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterTH}
  - {name: ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterKH}
  - {name: ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterPH}
  - {name: ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterID}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterTW}
  - {name: ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterNL}
  - {name: ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterBR}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterHK}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterJP}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterKR}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterSG}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterUS}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterUK}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterFR}
  - {name: ğŸ‡©ğŸ‡ª å¾·å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterDE}
  - {name: ğŸ‡¨ğŸ‡­ ç‘å£« è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterCH}
  - {name: ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterAU}
  - {name: ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterAE}
  - {name: ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterTR}
  - {name: ğŸ‡®ğŸ‡³ å°åº¦ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterIN}
  - {name: ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterMY}
  - {name: ğŸ‡»ğŸ‡³ è¶Šå— è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterVN}
  - {name: ğŸ‡¹ğŸ‡­ æ³°å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterTH}
  - {name: ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterKH}
  - {name: ğŸ‡µğŸ‡­ è²å¾‹å®¾ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterPH}
  - {name: ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterID}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterTW}
  - {name: ğŸ‡³ğŸ‡± è·å…° è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterNL}
  - {name: ğŸ‡§ğŸ‡· å·´è¥¿ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterBR}

# ===============================
# è§„åˆ™é…ç½®
# ===============================

RuleSet_classical: &RuleSet_classical {type: http, behavior: classical, interval: 43200, format: text, proxy: PROXY}
RuleSet_domain: &RuleSet_domain {type: http, behavior: domain, interval: 43200, format: text, proxy: PROXY}
RuleSet_ipcidr: &RuleSet_ipcidr {type: http, behavior: ipcidr, interval: 43200, format: text, proxy: PROXY}

RuleSet_classical_mrs: &RuleSet_classical_mrs {type: http, behavior: classical, interval: 43200, format: mrs, proxy: PROXY}
RuleSet_domain_mrs: &RuleSet_domain_mrs {type: http, behavior: domain, interval: 43200, format: mrs, proxy: PROXY}
RuleSet_ipcidr_mrs: &RuleSet_ipcidr_mrs {type: http, behavior: ipcidr, interval: 43200, format: mrs, proxy: PROXY}

# è®¢é˜…è§„åˆ™
rule-providers:
  # === å¹¿å‘Šæ‹¦æˆªï¼ˆSukkaï¼‰===
  reject_non_ip_no_drop:
    <<: *RuleSet_classical
    url: 'https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/reject-no-drop.txt'
    path: './rule_set/sukkaw_ruleset/reject_non_ip_no_drop.txt'

  reject_non_ip_drop:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/reject-drop.txt
    path: ./rule_set/sukkaw_ruleset/reject_non_ip_drop.txt

  reject_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/reject.txt
    path: ./rule_set/sukkaw_ruleset/reject_non_ip.txt

  reject_domainset:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/domainset/reject.txt
    path: ./rule_set/sukkaw_ruleset/reject_domainset.txt

  reject_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/reject.txt
    path: ./rule_set/sukkaw_ruleset/reject_ip.txt

  # å¹¿å‘Šæ‹¦æˆªï¼ˆå¢å¼ºï¼‰
  ads_domain:
    <<: *RuleSet_domain_mrs
    url: https://jsd.onmicrosoft.cn/gh/TG-Twilight/AWAvenue-Ads-Rule@main/Filters/AWAvenue-Ads-Rule-Clash.mrs
    path: ./rule_set/tg_twilight/ads_domain.mrs

  # === æµåª’ä½“ã€AIã€Telegram ç­‰ï¼ˆSukkaï¼‰===
  cdn_domainset:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/domainset/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_domainset.txt

  cdn_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_non_ip.txt

  stream_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/stream.txt
    path: ./rule_set/sukkaw_ruleset/stream_non_ip.txt

  stream_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/stream.txt
    path: ./rule_set/sukkaw_ruleset/stream_ip.txt

  ai_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/ai.txt
    path: ./rule_set/sukkaw_ruleset/ai_non_ip.txt

  telegram_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/telegram.txt
    path: ./rule_set/sukkaw_ruleset/telegram_non_ip.txt

  telegram_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/telegram.txt
    path: ./rule_set/sukkaw_ruleset/telegram_ip.txt

  # === Apple / Microsoft / CDN / Downloadï¼ˆSukkaï¼‰===
  apple_cdn:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/domainset/apple_cdn.txt
    path: ./rule_set/sukkaw_ruleset/apple_cdn.txt

  apple_services:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/apple_services.txt
    path: ./rule_set/sukkaw_ruleset/apple_services.txt

  apple_cn_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/apple_cn.txt
    path: ./rule_set/sukkaw_ruleset/apple_cn_non_ip.txt

  microsoft_cdn_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/microsoft_cdn.txt
    path: ./rule_set/sukkaw_ruleset/microsoft_cdn_non_ip.txt

  microsoft_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/microsoft.txt
    path: ./rule_set/sukkaw_ruleset/microsoft_non_ip.txt

  download_domainset:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/domainset/download.txt
    path: ./rule_set/sukkaw_ruleset/download_domainset.txt

  download_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/download.txt
    path: ./rule_set/sukkaw_ruleset/download_non_ip.txt

  # å†…ç½‘åŸŸåå’Œå±€åŸŸç½‘ IP
  lan_non_ip:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/lan.txt
    path: ./rule_set/sukkaw_ruleset/lan_non_ip.txt

  lan_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/lan.txt
    path: ./rule_set/sukkaw_ruleset/lan_ip.txt
  
  domestic_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/domestic.txt
    path: ./rule_set/sukkaw_ruleset/domestic_non_ip.txt

  direct_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/direct.txt
    path: ./rule_set/sukkaw_ruleset/direct_non_ip.txt

  global_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/global.txt
    path: ./rule_set/sukkaw_ruleset/global_non_ip.txt

  domestic_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/domestic.txt
    path: ./rule_set/sukkaw_ruleset/domestic_ip.txt

  china_ip:
    <<: *RuleSet_ipcidr
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/china_ip.txt
    path: ./rule_set/sukkaw_ruleset/china_ip.txt
  
  # ICP å¤‡æ¡ˆåŸŸååˆ—è¡¨ form https://www.nodeseek.com/post-464238-1
  cn_icp:
    <<: *RuleSet_domain_mrs
    url: https://static-file-global.353355.xyz/rules/cn-additional-list.mrs
    path: ./rule_set/fastoo/cn-additional-list.mrs

  # Fake-ip-filterä¸“ç”¨
  fakeip_filter_domain:
    <<: *RuleSet_domain_mrs
    url: https://jsd.onmicrosoft.cn/gh/DustinWin/ruleset_geodata@mihomo-ruleset/fakeip-filter.mrs
    path: ./rule_set/fakeip/Fakeip_Filter_Domain.mrs

  cn_domain:
    <<: *RuleSet_domain_mrs
    url: https://jsd.onmicrosoft.cn/gh/Kwisma/clash-rules@release/direct.mrs
    path: ./rule_set/fakeip/CN_Domain.mrs

  private_domain:
    <<: *RuleSet_domain_mrs
    url: https://jsd.onmicrosoft.cn/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.mrs
    path: ./rule_set/fakeip/Private_Domain.mrs

  # æ³„éœ²æ‹¦æˆª
  blockhttpdns_domain:
    <<: *RuleSet_domain_mrs
    url: https://jsd.onmicrosoft.cn/gh/peiyingyao/Rule-for-OCD@master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_Domain.mrs
    path: ./rule_set/other_reject/Category_httpdns_Domain.mrs

  blockhttpdns_ip:
    <<: *RuleSet_ipcidr_mrs
    url: https://jsd.onmicrosoft.cn/gh/peiyingyao/Rule-for-OCD@master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_IP.mrs
    path: ./rule_set/other_reject/Category_httpdns_IP.mrs

  stun_domain:
    <<: *RuleSet_domain_mrs
    url: https://jsd.onmicrosoft.cn/gh/Kwisma/rules@main/rules/mihomo/STUN/STUN_Domain.mrs
    path: ./rule_set/other_reject/STUN_Domain.mrs

# åˆ†æµè§„åˆ™
rules:

  ###############################################################
  # 1. è¿›ç¨‹ç›´è¿
  ###############################################################

  # è¿›ç¨‹åç²¾ç¡®åŒ¹é…
  - PROCESS-NAME,StarRail.exe,DIRECT
  - PROCESS-NAME,YuanShen.exe.exe,DIRECT
  - PROCESS-NAME,ZenlessZoneZero.exe,DIRECT
  - PROCESS-NAME,Starward.RPC.exe,DIRECT

  # è·¯å¾„å…³é”®è¯ï¼ˆæ­£åˆ™ï¼‰
  - PROCESS-PATH-REGEX,(?i).*[Tt]encent.*[Ww]echat.*,DIRECT
  - PROCESS-PATH-REGEX,(?i).*Adobe.*,DIRECT

  # è¿›ç¨‹åå…³é”®è¯ï¼ˆæ­£åˆ™ï¼‰
  - PROCESS-NAME-REGEX,(?i).*wechat.*,DIRECT
  - PROCESS-NAME-REGEX,Adobe.*\.exe,DIRECT


  ###############################################################
  # 2. è¿›ç¨‹ä»£ç†(æ¢æˆä½ è‡ªå·±çš„å®é™…è·¯å¾„)
  ###############################################################

  # - PROCESS-PATH,C:\Users\YourName\AppData\Local\Programs\obsidian\Obsidian.exe,PROXY
  # - PROCESS-PATH,D:\YourPath\qBittorrent\qbittorrent.exe,DOWNLOAD


  ###############################################################
  # 3. å­è§„åˆ™è°ƒç”¨
  ###############################################################

  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),DIRECT-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),PROXY-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),ADBLOCK-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),HTTPDNS-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),LEAK-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),FIXED-REJECT


  ###############################################################
  # 4. â­ æ ¸å¿ƒï¼šåŸç‰ˆ GeoSite åˆ†æµ---
  # https://www.aloxaf.com/2025/04/how_to_use_geosite/
  ###############################################################

  - GEOSITE,category-ads-all,AdBlock            # å¹¿å‘ŠåŠè¿½è¸ªåŸŸå
  - GEOSITE,category-pt,DIRECT                  # ç§æœ‰ Tracker
  - GEOSITE,category-public-tracker,DIRECT      # å…¬å¼€ BT Tracker
  - GEOSITE,geolocation-!cn@cn,DIRECT           # ä»â€œå›½å¤–åˆ—è¡¨â€ä¸­æå–æ ‡è®°ä¸º @cn çš„åŸŸå â†’ ç›´è¿
  - GEOSITE,geolocation-!cn,PROXY               # å‰©ä½™â€œå›½å¤–åˆ—è¡¨â€ â†’ ä»£ç†
  - GEOSITE,geolocation-cn@!cn,PROXY            # ä»â€œå›½å†…åˆ—è¡¨â€ä¸­æå–æ ‡è®°ä¸º @!cn çš„åŸŸå â†’ ä»£ç†
  - GEOSITE,geolocation-cn,DIRECT               # å‰©ä½™â€œå›½å†…åˆ—è¡¨â€ â†’ ç›´è¿
  - GEOSITE,tld-cn,DIRECT                       # æ‰€æœ‰é¡¶çº§åŸŸåä¸º .cn çš„ç½‘ç«™


  ###############################################################
  # 5. FINAL
  ###############################################################

  - MATCH,PROXY



################################################################
# å­è§„åˆ™
################################################################

sub-rules:

  ###############################################################
  # ç›´è¿è§„åˆ™
  ###############################################################
  DIRECT-RULES:

    # è½¯ä»¶æºç›´è¿
    - OR,(
        (DOMAIN-SUFFIX,ubuntu.com),
        (DOMAIN-SUFFIX,archive.ubuntu.com),
        (DOMAIN-SUFFIX,security.ubuntu.com),
        (DOMAIN-SUFFIX,launchpad.net),
        (DOMAIN-SUFFIX,tsinghua.edu.cn)
      ),DIRECT

    # å¸¸ç”¨/å›½å†…åŸŸåç›´è¿
    - OR,(
        (DOMAIN,hkrpg-log-upload.mihoyo.com),
        (DOMAIN,log-upload.mihoyo.com),
        (DOMAIN,log-upload-v6.mihoyo.com),
        (DOMAIN-SUFFIX,quark.cn),
        (DOMAIN-SUFFIX,qianwen.com),
        (DOMAIN-SUFFIX,ccopyright.com.cn),
        (DOMAIN-SUFFIX,bing.com),
        (DOMAIN-SUFFIX,biliapi.com),
        (DOMAIN-SUFFIX,microsoft.com),
        (DOMAIN-SUFFIX,qq.com),
        (DOMAIN-SUFFIX,y.qq.com),
        (DOMAIN-SUFFIX,nvidia.com),
        (DOMAIN-SUFFIX,mihoyo.com),
        (DOMAIN-SUFFIX,hoyoverse.com),
        (DOMAIN-SUFFIX,icourse163.org),
        (DOMAIN-SUFFIX,lanzou.com),
        (DOMAIN-SUFFIX,pc.woozooo.com),
        (DOMAIN-SUFFIX,sls.cbd.com.cn),
        (DOMAIN-SUFFIX,bilibili.com),
        (DOMAIN-SUFFIX,aliyun.com),
        (DOMAIN-SUFFIX,jetbrains.com),
        (DOMAIN-SUFFIX,doorzo.cn),
        (DOMAIN-SUFFIX,cnblogs.com),
        (DOMAIN-SUFFIX,baimiaoapp.com),
        (DOMAIN-SUFFIX,baidu.com),
        (DOMAIN-SUFFIX,pan.baidu.com),
        (DOMAIN-SUFFIX,pcs.baidu.com),
        (DOMAIN-SUFFIX,maoken.com),
        (DOMAIN-SUFFIX,baidupcs.com)
      ),DIRECT

    # ç›´è¿æ­£åˆ™/å…³é”®è¯
    - OR,(
        (DOMAIN-KEYWORD,nicdrcom)
      ),DIRECT
    - OR,(
        (DOMAIN-REGEX,^cas\.guet\.edu\.cn(:\d+)?$),
        (DOMAIN-REGEX,\w{10}\.(adobe|adobestats)\.io)
      ),DIRECT

    # æ ¡å›­ç½‘ / æœ¬åœ° IP ç›´è¿
    - OR,(
        (IP-CIDR,10.60.0.0/16,no-resolve),
        (IP-CIDR,10.70.0.0/16,no-resolve),
        (IP-CIDR,10.0.0.0/8,no-resolve),
        (IP-CIDR,172.16.0.0/12,no-resolve),
        (IP-CIDR,192.168.0.0/16,no-resolve),
        (IP-CIDR,127.0.0.0/8,no-resolve),
        (DOMAIN,localhost),
        (DOMAIN-KEYWORD,127.0.0.1)
      ),DIRECT

    # ç›´è¿è§„åˆ™é›†
    - OR,(
        (RULE-SET,apple_cn_non_ip),
        (RULE-SET,apple_cdn),
        (RULE-SET,apple_services),
        (RULE-SET,microsoft_non_ip),
        (RULE-SET,microsoft_cdn_non_ip),
        (RULE-SET,lan_non_ip),
        (RULE-SET,lan_ip)
      ),DIRECT


  ###############################################################
  # ä»£ç†è§„åˆ™
  ###############################################################
  PROXY-RULES:

    # ä»£ç†åŸŸå
    - OR,(
        (DOMAIN-SUFFIX,github.com),
        (DOMAIN-SUFFIX,githubusercontent.com),
        (DOMAIN-SUFFIX,githubassets.com),
        (DOMAIN-SUFFIX,github.io),
        (DOMAIN-SUFFIX,ghcr.io),
        (DOMAIN-SUFFIX,githubstatus.com),
        (DOMAIN-SUFFIX,githubcopilot.com),
        (DOMAIN-SUFFIX,fastly.net),
        (DOMAIN-SUFFIX,afdian.com),
        (DOMAIN-SUFFIX,trackerslist.com),
        (DOMAIN-SUFFIX,mikanani.me),
        (DOMAIN-SUFFIX,kox.moe),
        (DOMAIN-SUFFIX,annas-archive.org),
        (DOMAIN-SUFFIX,docs.rs),
        (DOMAIN-SUFFIX,dict.eudic.net)
      ),PROXY

    # ä»£ç†è§„åˆ™é›†
    - RULE-SET,ai_non_ip,AIGC
    - OR,(
        (RULE-SET,cdn_domainset)
        ),PROXY
    - OR,(
        (RULE-SET,telegram_non_ip),
        (RULE-SET,telegram_ip),
        (RULE-SET,download_domainset)
      ),DOWNLOAD

    - OR,(
        (RULE-SET,stream_non_ip),
        (RULE-SET,stream_ip)
      ),STREAM

  ###############################################################
  # æ‹¦æˆªå’Œé˜²æ³„æ¼
  ###############################################################
  # å¹¿å‘Šæ‹¦æˆª
  ADBLOCK-RULES:
    - OR,(
        (RULE-SET,ads_domain),
        (RULE-SET,reject_domainset),
        (RULE-SET,reject_non_ip_no_drop)
      ),AdBlock

  ###############################################################
  # HTTPDNS / DOH / DOT / DNS æ³„æ¼
  ###############################################################
  HTTPDNS-RULES:
    - OR,(
        (RULE-SET,blockhttpdns_domain),
        (RULE-SET,blockhttpdns_ip,no-resolve)
      ),HttpDNSBlock

  ###############################################################
  # WebRTC / STUN / TURN æ³„æ¼
  ###############################################################
  LEAK-RULES:
    - OR,(
        (RULE-SET,stun_domain),
        (AND,((NETWORK,TCP),(DST-PORT,5349))),
        (AND,((NETWORK,UDP),(DST-PORT,5350))),
        (AND,((NETWORK,UDP),(DST-PORT,5351))),
        (AND,((NETWORK,UDP),(DST-PORT,19302))),
        (DST-PORT,3478)
      ),LeakBlock

  ###############################################################
  # å‰©ä½™å›ºå®šæ‹’ç»
  ###############################################################
  FIXED-REJECT:
    - RULE-SET,reject_non_ip_drop,REJECT-DROP
