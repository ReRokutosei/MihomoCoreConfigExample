# Mihomo ä¸»é…ç½®æ–‡ä»¶

# å…¨å±€é…ç½®
# å¯ç”¨ TUN æ¨¡å¼ï¼ˆé€æ˜ä»£ç†ï¼‰ï¼Œæ‰€æœ‰æµé‡ç”±è™šæ‹Ÿç½‘å¡è‡ªåŠ¨æ¥ç®¡ï¼Œ
# ä¼ ç»Ÿä»£ç†ç«¯å£ï¼ˆHTTP/SOCKSï¼‰å·²æ— å¿…è¦ï¼Œå…¨éƒ¨è®¾ä¸º 0 ç¦ç”¨ã€‚
# è‹¥éœ€ä¸´æ—¶è°ƒè¯•è§„åˆ™æˆ–å…±äº«ä»£ç†ç»™å…¶ä»–è®¾å¤‡ï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨ mixed-port å¹¶é‡è½½ã€‚
port: 0
socks-port: 0
mixed-port: 0
allow-lan: false
bind-address: "*"
ipv6: false
mode: rule
log-level: warning
tcp-concurrent: true
unified-delay: true
global-client-fingerprint: chrome

# å¤–éƒ¨æ§åˆ¶å™¨é…ç½® (zashboard)
external-controller: 127.0.0.1:9090
secret: ""  # å¯†ç ç•™ç©º
external-ui: ./ui
external-ui-name: zashboard
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist-no-fonts.zip"

# é…ç½®æ–‡ä»¶å­˜å‚¨
profile:
  store-selected: true
  store-fake-ip: true

# å¥åº·æ£€æŸ¥æ¨¡æ¿ [æ¯ 12h æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 300 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
# å¸¸ç”¨å¥åº·æ£€æŸ¥ URLs:
# 1. https://www.gstatic.com/generate_204             Google æä¾›
# 2. https://cp.cloudflare.com/generate_204           Cloudflare æä¾›
# 3. https://www.msftconnecttest.com/connecttest.txt  Microsoft æä¾›
# 4. https://captive.apple.com/hotspot-detect.html    Apple æä¾›
RemoteProviderTemplate: &Remote {type: http, interval: 43200, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}}
LocalProviderTemplate: &Local {type: file, health-check: {enable: true, url: 'https://www.gstatic.com/generate_204', interval: 300}}

# è®¢é˜…åˆé›†
# refer to https://github.com/MetaCubeX/mihomo/discussions/2433#discussioncomment-15265377
proxy-providers:
  Airport1: # åç§°å¯è‡ªå®šä¹‰
    url: 'æ­¤å¤„å¡«å…¥ä½ çš„è®¢é˜…é“¾æ¥ï¼ˆæ³¨æ„å¿…é¡»æ˜¯éé˜…åå³ç„šç±»å‹ï¼‰'
    <<: *Remote
    path: './proxy_provider/airport1.yaml'

  # è¯»å–æœ¬åœ°é…ç½®
  # Airport2:
  #   <<: *Local
  #   path: './proxy_provider/airport2.yaml'

# TUN é…ç½®
tun:
  enable: true
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  device: Mihomo
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true # å¯ç”¨ä¸¥æ ¼è·¯ç”±

# DNS é…ç½®
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  cache-algorithm: arc
  reject-private: true
  prefer-h3: false
  use-hosts: true
  respect-rules: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # fake-ip-range6: fdfe:dcba:9876::1/64
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - '*.lan'
    - '+.local'
    - 'localhost'
    - RULE-SET:private_domain
    - RULE-SET:fakeip_filter_domain

  # å¯åŠ¨é˜¶æ®µä¸åŸºç¡€è§£æï¼Œä»…å…è®¸ä½¿ç”¨ç›´è¿ UDP DNS
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  # è§£æä»£ç†æœåŠ¡å™¨è‡ªèº«åŸŸåï¼Œé¿å…ä»£ç†æœªå°±ç»ªå¯¼è‡´æ­»é”
  proxy-server-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  # ä¸»è§£ææ± ï¼šä¸º fake-ip æä¾›å€™é€‰ IP é›†åˆ
  nameserver:
    - quic://dns.alidns.com:853
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
    - 223.6.6.6
    - tls://223.5.5.5:853

  
# âš ï¸ fallback
# ä½œç”¨ï¼šå½“ nameserver è¿”å›çš„ IP è¢«åˆ¤å®šä¸ºâ€œæ±¡æŸ“â€æˆ–â€œéç›®æ ‡åœ°åŒºâ€æ—¶ï¼Œ
# ä½¿ç”¨ fallback ä¸­çš„å¢ƒå¤– DNSï¼ˆå¦‚ Cloudflare/Googleï¼‰é‡æ–°è§£æã€‚
# å› æ­¤ï¼šé™¤éä½ ç¡®è®¤èƒ½ç¨³å®šè®¿é—®å¢ƒå¤– DoH ä¸”æœ‰æ˜ç¡®æ±¡æŸ“åœºæ™¯ï¼Œå¦åˆ™ä¿æŒ fallback æ³¨é‡ŠçŠ¶æ€
#
# fallback:
#   - https://cloudflare-dns.com/dns-query
#   - https://dns.google/dns-query
#
# fallback-filter:
#   geoip: true
#   geoip-code: CN
#   ipcidr:
#     - 240.0.0.0/4
#     - 0.0.0.0/32

# å—…æ¢é…ç½®
# ä»åŠ å¯†æµé‡ä¸­æå–çœŸå®åŸŸåï¼Œç”¨äºç²¾å‡†è·¯ç”±
sniffer:
  enable: true
  parse-pure-ip: true                 # å¯¹çº¯ IP æµé‡å°è¯•åå‘è§£æåŸŸåï¼ˆæå‡è§„åˆ™å‘½ä¸­ç‡ï¼‰
  force-dns-mapping: true             # å°†å—…æ¢åˆ°çš„åŸŸåå¼ºåˆ¶æ˜ å°„å› DNS æŸ¥è¯¢ç»“æœ
  override-destination: true          # ç”¨å—…æ¢ç»“æœè¦†ç›–åŸå§‹è¿æ¥ç›®æ ‡

  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
      override-destination: true
    QUIC:
      ports: [443, 8443]
      # QUIC å—…æ¢æ”¯æŒæœ‰é™ï¼Œä½†ä¿ç•™ä»¥å°è¯•æå– SNI

  # å¼ºåˆ¶å¯¹ä»¥ä¸‹åŸŸåå¯ç”¨å—…æ¢
  # é€šå¸¸ç”¨äºå¿…é¡»èµ°ä»£ç†çš„å¢ƒå¤–æœåŠ¡
  force-domain:
    - "+.google.com"
    - "+.youtube.com"
    - "+.ytimg.com"
    - "+.gstatic.com"
    - "+.ggpht.com"
    - "+.doubleclick.net"
    - "+.googlevideo.com"
    - "+.netflix.com"
    - "+.nflxvideo.net"
    - "+.akamaihd.net"
    - "+.v2ex.com"
    - "+.cloudflare.com"
    - "+.openai.com"
    - "+.github.com"
    - "+.githubusercontent.com"


  # è·³è¿‡å—…æ¢çš„åŸŸå
  # é€šå¸¸ç”¨äºé¿å…å¹²æ‰°ç›´è¿æœåŠ¡ã€æœ¬åœ°ç½‘ç»œæˆ–å¼•å‘è¯¯åˆ¤
  skip-domain:
    # ç³»ç»Ÿè¿é€šæ€§ / æœ¬æœºæœåŠ¡
    - "dns.msftncsi.com"
    - "www.msftconnecttest.com"
    - "www.msftncsi.com"
    - "time.windows.com"
    - "time.apple.com"

    # æœ¬åœ°ä¸å†…ç½‘
    - "+.lan"
    - "+.local"
    - "localhost"
    - "home.arpa"
    - "+.localdomain"
    - "+.localhost"


# ===============================
# Filter èŠ‚ç‚¹ç­›é€‰
# ===============================
FilterJP: &FilterJP '^(?=.*(?:ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterKR: &FilterKR '^(?=.*(?:ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|KR))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterSG: &FilterSG '^(?=.*(?:ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterUS: &FilterUS '^(?=.*(?:ğŸ‡ºğŸ‡¸|ç¾å›½|US))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterHK: &FilterHK '^(?=.*(?:ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterTW: &FilterTW '^(?=.*(?:ğŸ‡¹ğŸ‡¼|å°æ¹¾|TW))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterIN: &FilterIN '^(?=.*(?:ğŸ‡®ğŸ‡³|å°åº¦|IN))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterUK: &FilterUK '^(?=.*(?:ğŸ‡¬ğŸ‡§|è‹±å›½|UK))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterAU: &FilterAU '^(?=.*(?:ğŸ‡¦ğŸ‡º|æ¾³å¤§åˆ©äºš|æ¾³æ´²|AU))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterAE: &FilterAE '^(?=.*(?:ğŸ‡¦ğŸ‡ª|è¿ªæ‹œ|é˜¿è”é…‹|AE))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterCH: &FilterCH '^(?=.*(?:ğŸ‡¨ğŸ‡­|ç‘å£«|è‹é»ä¸–|CH))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterDE: &FilterDE '^(?=.*(?:ğŸ‡©ğŸ‡ª|å¾·å›½|DE))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterTR: &FilterTR '^(?=.*(?:ğŸ‡¹ğŸ‡·|åœŸè€³å…¶|TR))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterMY: &FilterMY '^(?=.*(?:ğŸ‡²ğŸ‡¾|é©¬æ¥è¥¿äºš|MY))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterVN: &FilterVN '^(?=.*(?:ğŸ‡»ğŸ‡³|è¶Šå—|VN))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterTH: &FilterTH '^(?=.*(?:ğŸ‡¹ğŸ‡­|æ³°å›½|TH))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterKH: &FilterKH '^(?=.*(?:ğŸ‡°ğŸ‡­|æŸ¬åŸ”å¯¨|KH))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterPH: &FilterPH '^(?=.*(?:ğŸ‡µğŸ‡­|è²å¾‹å®¾|PH))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterID: &FilterID '^(?=.*(?:ğŸ‡®ğŸ‡©|å°åº¦å°¼è¥¿äºš|ID))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterFR: &FilterFR '^(?=.*(?:ğŸ‡«ğŸ‡·|æ³•å›½|FR))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterBR: &FilterBR '^(?=.*(?:ğŸ‡§ğŸ‡·|å·´è¥¿|BR))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'
FilterNL: &FilterNL '^(?=.*(?:ğŸ‡³ğŸ‡±|è·å…°|NL))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€|0\.1å€|0\.01å€)).*$'

FilterMultiplier: &FilterMultiplier '(?=.*(?:0\.1å€|0\.01å€))(?!.*(?:å‰©ä½™|å¥—é¤)).*$'
FilterStream: &FilterStream '(?=.*(?:æµåª’ä½“))(?!.*(?:å‰©ä½™|å¥—é¤|0\.1å€|0\.01å€)).*$'


# ===============================
# ç­–ç•¥ç»„åŸºç¡€é…ç½®æ¨¡æ¿
# ===============================
Select: &Select {type: select, url: 'https://cp.cloudflare.com/generate_204', disable-udp: false, hidden: false, include-all: true}
# è‡ªåŠ¨é€‰æ‹© [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œå®¹å·® 50msï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
UrlTest: &UrlTest {type: url-test, url: 'https://cp.cloudflare.com/generate_204', interval: 300, lazy: true, tolerance: 50, timeout: 2000, disable-udp: false, max-failed-times: 3, hidden: true, include-all: true}
# è‡ªåŠ¨å›é€€ [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
FallBack: &FallBack {type: fallback, url: 'https://cp.cloudflare.com/generate_204', interval: 300, lazy: true, timeout: 2000, disable-udp: false, max-failed-times: 3, hidden: true, include-all: true}
# è´Ÿè½½å‡è¡¡ [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡åˆ™è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
LoadBalance: &LoadBalance {type: load-balance, url: 'https://cp.cloudflare.com/generate_204', interval: 300, lazy: true, disable-udp: false, strategy: consistent-hashing, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}

# ===============================
# ç­–ç•¥ç»„
# ===============================
proxy-groups:
  
  # ç¬¬ä¸€å±‚ï¼šAIGC
  - name: AIGC
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/Cyrene(2)_256.png"
    proxies: [è‡ªåŠ¨, æ‰‹åŠ¨,
              ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨é€‰æ‹©, ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨é€‰æ‹©,
              ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨é€‰æ‹©, ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨é€‰æ‹©,
              ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨é€‰æ‹©, ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨é€‰æ‹©]

  # ç¬¬ä¸€å±‚ï¼šTelegram
  - name: Telegram
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(11)_256.png"
    proxies: [è‡ªåŠ¨, æ‰‹åŠ¨, Download]

  # ç¬¬ä¸€å±‚ï¼šä¸‹è½½ä¸“ç”¨
  - name: Download
    type: select
    icon: 
    proxies: [DLUrlTest, DLFallBack, DLLoadBalance]

  # ç¬¬ä¸€å±‚ï¼šæµåª’ä½“ä¸“ç”¨
  - name: STREAM
    filter: *FilterStream
    <<: *UrlTest

  # ç¬¬ä¸€å±‚ï¼šå¹¿å‘Šæ‹¦æˆªç­–ç•¥
  # REJECTï¼šæ˜ç¡®æ‹’ç»ï¼Œå‘å¯¹ç«¯è¿”å›ä¸€ä¸ª RSTï¼ˆTCPï¼‰ æˆ– ICMP Port Unreachableï¼ˆUDPï¼‰ã€‚
  # REJECT-DROPï¼šç›´æ¥ä¸¢åŒ…ä¸å›åº”ï¼Œå¯¹ç«¯ä¼šè¶…æ—¶ã€‚
  - name: AdBlock
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/Evernight(1)_256.png"
    proxies: [REJECT, REJECT-DROP, DIRECT]

  # ç¬¬ä¸€å±‚ï¼šHttpDNS - DoH/DoT ç­‰ DNS æ³„æ¼é˜»æ–­
  - name: HttpDNSBlock
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/Evernight(2)_256.png"
    type: select
    proxies: [REJECT, REJECT-DROP, DIRECT]

  # ç¬¬ä¸€å±‚ï¼šSTUN/WebRTC ç­‰ UDP æ³„æ¼
  - name: LeakBlock
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(5)_256.png"
    proxies: [REJECT, REJECT-DROP, DIRECT]

  # ç¬¬ä¸€å±‚ï¼šPROXY
  - name: PROXY
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(1)_256.png"
    proxies: [è‡ªåŠ¨, æ‰‹åŠ¨]
    ip-version: ipv4-prefer


  # ç¬¬äºŒå±‚ï¼šè‡ªåŠ¨ / æ‰‹åŠ¨
  - name: æ‰‹åŠ¨
    filter: '^(?!.*(å¥—é¤|å‰©ä½™)).*$'
    <<: *Select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/Stelle_256.png"

  - name: è‡ªåŠ¨
    type: select
    proxies: [è‡ªåŠ¨é€‰æ‹©, è‡ªåŠ¨å›é€€, è´Ÿè½½å‡è¡¡]
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(3)_256.png"

  # ç¬¬äºŒå±‚ï¼šä¸‹è½½å­ç»„
  - name: DLUrlTest
    filter: *FilterMultiplier
    <<: *UrlTest

  # ç¬¬äºŒå±‚ï¼šä¸‹è½½å­ç»„
  - name: DLFallBack
    filter: *FilterMultiplier
    <<: *FallBack

  # ç¬¬äºŒå±‚ï¼šä¸‹è½½å­ç»„
  - name: DLLoadBalance
    filter: *FilterMultiplier
    <<: *LoadBalance


  # ç¬¬ä¸‰å±‚: å¼•ç”¨åŸºç¡€ç»„èµ„æº
  - name: è‡ªåŠ¨é€‰æ‹©
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(7)_256.png"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨é€‰æ‹©

  - name: è‡ªåŠ¨å›é€€
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(13)_256.png"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨å›é€€
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨å›é€€
      - ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨å›é€€
      - ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨å›é€€
      - ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨å›é€€
      - ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨å›é€€
      - ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨å›é€€
      - ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨å›é€€
      - ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨å›é€€
      - ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨å›é€€
      - ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨å›é€€
      - ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨å›é€€
      - ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨å›é€€
      - ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨å›é€€
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨å›é€€
      - ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨å›é€€
      - ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨å›é€€

  - name: è´Ÿè½½å‡è¡¡
    type: select
    icon: "https://raw.githubusercontent.com/ReRokutosei/MihomoCoreConfigExample/main/config/ui/icons/March7th(15)_256.png"
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ è´Ÿè½½å‡è¡¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è´Ÿè½½å‡è¡¡
      - ğŸ‡°ğŸ‡· éŸ©å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è´Ÿè½½å‡è¡¡
      - ğŸ‡ºğŸ‡¸ ç¾å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡¬ğŸ‡§ è‹±å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡«ğŸ‡· æ³•å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡©ğŸ‡ª å¾·å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡¨ğŸ‡­ ç‘å£« è´Ÿè½½å‡è¡¡
      - ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è´Ÿè½½å‡è¡¡
      - ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è´Ÿè½½å‡è¡¡
      - ğŸ‡®ğŸ‡³ å°åº¦ è´Ÿè½½å‡è¡¡
      - ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è´Ÿè½½å‡è¡¡
      - ğŸ‡»ğŸ‡³ è¶Šå— è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡­ æ³°å›½ è´Ÿè½½å‡è¡¡
      - ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è´Ÿè½½å‡è¡¡
      - ğŸ‡µğŸ‡­ è²å¾‹å®¾ è´Ÿè½½å‡è¡¡
      - ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ è´Ÿè½½å‡è¡¡
      - ğŸ‡³ğŸ‡± è·å…° è´Ÿè½½å‡è¡¡
      - ğŸ‡§ğŸ‡· å·´è¥¿ è´Ÿè½½å‡è¡¡


  # ç¬¬å››å±‚ï¼šåŸºç¡€èµ„æº
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterHK}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterJP}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterKR}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterSG}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterUS}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterUK}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterFR}
  - {name: ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterDE}
  - {name: ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterCH}
  - {name: ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterAU}
  - {name: ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterAE}
  - {name: ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterTR}
  - {name: ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterIN}
  - {name: ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterMY}
  - {name: ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterVN}
  - {name: ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterTH}
  - {name: ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterKH}
  - {name: ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterPH}
  - {name: ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterID}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterTW}
  - {name: ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterNL}
  - {name: ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨é€‰æ‹©, <<: *UrlTest, filter: *FilterBR}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterHK}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterJP}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterKR}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterSG}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterUS}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterUK}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterFR}
  - {name: ğŸ‡©ğŸ‡ª å¾·å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterDE}
  - {name: ğŸ‡¨ğŸ‡­ ç‘å£« è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterCH}
  - {name: ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterAU}
  - {name: ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterAE}
  - {name: ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterTR}
  - {name: ğŸ‡®ğŸ‡³ å°åº¦ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterIN}
  - {name: ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterMY}
  - {name: ğŸ‡»ğŸ‡³ è¶Šå— è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterVN}
  - {name: ğŸ‡¹ğŸ‡­ æ³°å›½ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterTH}
  - {name: ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterKH}
  - {name: ğŸ‡µğŸ‡­ è²å¾‹å®¾ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterPH}
  - {name: ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterID}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterTW}
  - {name: ğŸ‡³ğŸ‡± è·å…° è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterNL}
  - {name: ğŸ‡§ğŸ‡· å·´è¥¿ è‡ªåŠ¨å›é€€, <<: *FallBack, filter: *FilterBR}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterHK}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterJP}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterKR}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterSG}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterUS}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterUK}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterFR}
  - {name: ğŸ‡©ğŸ‡ª å¾·å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterDE}
  - {name: ğŸ‡¨ğŸ‡­ ç‘å£« è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterCH}
  - {name: ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterAU}
  - {name: ğŸ‡¦ğŸ‡ª é˜¿è”é…‹ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterAE}
  - {name: ğŸ‡¹ğŸ‡· åœŸè€³å…¶ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterTR}
  - {name: ğŸ‡®ğŸ‡³ å°åº¦ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterIN}
  - {name: ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºš è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterMY}
  - {name: ğŸ‡»ğŸ‡³ è¶Šå— è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterVN}
  - {name: ğŸ‡¹ğŸ‡­ æ³°å›½ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterTH}
  - {name: ğŸ‡°ğŸ‡­ æŸ¬åŸ”å¯¨ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterKH}
  - {name: ğŸ‡µğŸ‡­ è²å¾‹å®¾ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterPH}
  - {name: ğŸ‡®ğŸ‡© å°åº¦å°¼è¥¿äºš è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterID}
  - {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterTW}
  - {name: ğŸ‡³ğŸ‡± è·å…° è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterNL}
  - {name: ğŸ‡§ğŸ‡· å·´è¥¿ è´Ÿè½½å‡è¡¡, <<: *LoadBalance, filter: *FilterBR}

# ===============================
# è§„åˆ™é”šç‚¹
# ===============================

RuleSet_classical: &RuleSet_classical {type: http, behavior: classical, interval: 43200, format: text, proxy: PROXY}
RuleSet_domain: &RuleSet_domain {type: http, behavior: domain, interval: 43200, format: text, proxy: PROXY}
RuleSet_ipcidr: &RuleSet_ipcidr {type: http, behavior: ipcidr, interval: 43200, format: text, proxy: PROXY}

RuleSet_classical_mrs: &RuleSet_classical_mrs {type: http, behavior: classical, interval: 43200, format: mrs, proxy: PROXY}
RuleSet_domain_mrs: &RuleSet_domain_mrs {type: http, behavior: domain, interval: 43200, format: mrs, proxy: PROXY}
RuleSet_ipcidr_mrs: &RuleSet_ipcidr_mrs {type: http, behavior: ipcidr, interval: 43200, format: mrs, proxy: PROXY}

# è®¢é˜…è§„åˆ™
rule-providers:

  ads_domain:
    <<: *RuleSet_domain_mrs
    url: https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.mrs
    path: ./rule_set/AWAvenue/ads_domain.mrs

  cdn_domainset:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/domainset/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_domainset.txt

  cdn_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/cdn.txt
    path: ./rule_set/sukkaw_ruleset/cdn_non_ip.txt

  stream_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/stream.txt
    path: ./rule_set/sukkaw_ruleset/stream_non_ip.txt

  stream_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/stream.txt
    path: ./rule_set/sukkaw_ruleset/stream_ip.txt

  ai_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/ai.txt
    path: ./rule_set/sukkaw_ruleset/ai_non_ip.txt

  telegram_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/telegram.txt
    path: ./rule_set/sukkaw_ruleset/telegram_non_ip.txt

  telegram_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/telegram.txt
    path: ./rule_set/sukkaw_ruleset/telegram_ip.txt

  download_domainset:
    <<: *RuleSet_domain
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/domainset/download.txt
    path: ./rule_set/sukkaw_ruleset/download_domainset.txt

  download_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/download.txt
    path: ./rule_set/sukkaw_ruleset/download_non_ip.txt
  
  domestic_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/domestic.txt
    path: ./rule_set/sukkaw_ruleset/domestic_non_ip.txt

  domestic_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/ip/domestic.txt
    path: ./rule_set/sukkaw_ruleset/domestic_ip.txt

  direct_non_ip:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/refs/heads/master/Clash/non_ip/direct.txt
    path: ./rule_set/sukkaw_ruleset/direct_non_ip.txt
  
  # ICP å¤‡æ¡ˆåŸŸååˆ—è¡¨ 40000+ æ¡ 
  # form https://www.nodeseek.com/post-464238-1
  # ä» å¤©çœ¼æŸ¥ çˆ¬å–çš„å›½å†…ä¸»æµä¼ä¸šåœ¨å·¥ä¿¡éƒ¨å­˜åœ¨ã€éç»è¥æ€§ICPå¤‡æ¡ˆå·ã€‘æˆ–ã€è®¸å¯è¯å·ã€‘çš„åŸŸå
  cn_icp:
    <<: *RuleSet_domain_mrs
    url: https://static-file-global.353355.xyz/rules/cn-additional-list.mrs
    path: ./rule_set/fastoo/cn-additional-list.mrs

  fakeip_filter_domain:
    <<: *RuleSet_domain_mrs
    url: https://raw.githubusercontent.com/DustinWin/ruleset_geodata/mihomo-ruleset/fakeip-filter.mrs
    path: ./rule_set/fakeip/Fakeip_Filter_Domain.mrs

  direct_domain:
    <<: *RuleSet_domain_mrs
    url: https://raw.githubusercontent.com/Kwisma/clash-rules/release/direct.mrs
    path: ./rule_set/Kwisma/direct.mrs

  private_domain:
    <<: *RuleSet_domain_mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs
    path: ./rule_set/fakeip/Private_Domain.mrs

  blockhttpdns_domain:
    <<: *RuleSet_domain_mrs
    url: https://raw.githubusercontent.com/peiyingyao/Rule-for-OCD/master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_Domain.mrs
    path: ./rule_set/peiyingyao/Category_httpdns_Domain.mrs

  blockhttpdns_ip:
    <<: *RuleSet_ipcidr_mrs
    url: https://raw.githubusercontent.com/peiyingyao/Rule-for-OCD/master/rule/Clash/BlockHttpDNS/BlockHttpDNS_OCD_IP.mrs
    path: ./rule_set/peiyingyao/Category_httpdns_IP.mrs

  stun_domain:
    <<: *RuleSet_domain_mrs
    url: https://raw.githubusercontent.com/peiyingyao/Rule-for-OCD/master/rule/Clash/STUN/STUN_OCD_Domain.mrs
    path: ./rule_set/peiyingyao/STUN_Domain.mrs

# åˆ†æµè§„åˆ™
rules:

  ###############################################################
  # å­è§„åˆ™è°ƒç”¨
  ###############################################################

  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),ADBLOCK-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),HTTPDNS-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),LEAK-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),DIRECT-RULES
  - SUB-RULE,(OR,((NETWORK,TCP),(NETWORK,UDP))),PROXY-RULES


  ###############################################################
  # FINAL
  ###############################################################

  - MATCH,PROXY



################################################################
# SUB RULES
################################################################

sub-rules:

  ###############################################################
  # ç›´è¿è§„åˆ™
  ###############################################################
  DIRECT-RULES:

    # å›½å†…åŸŸåç›´è¿
    - OR,(
        (DOMAIN,cloudflare.com),
        (DOMAIN,hkrpg-log-upload.mihoyo.com),
        (DOMAIN,log-upload.mihoyo.com),
        (DOMAIN,log-upload-v6.mihoyo.com),
        (DOMAIN-SUFFIX,quark.cn),
        (DOMAIN-SUFFIX,qianwen.com),
        (DOMAIN-SUFFIX,ccopyright.com.cn),
        (DOMAIN-SUFFIX,bing.com),
        (DOMAIN-SUFFIX,biliapi.com),
        (DOMAIN-SUFFIX,microsoft.com),
        (DOMAIN-SUFFIX,qq.com),
        (DOMAIN-SUFFIX,y.qq.com),
        (DOMAIN-SUFFIX,nvidia.com),
        (DOMAIN-SUFFIX,mihoyo.com),
        (DOMAIN-SUFFIX,hoyoverse.com),
        (DOMAIN-SUFFIX,icourse163.org),
        (DOMAIN-SUFFIX,lanzou.com),
        (DOMAIN-SUFFIX,pc.woozooo.com),
        (DOMAIN-SUFFIX,sls.cbd.com.cn),
        (DOMAIN-SUFFIX,bilibili.com),
        (DOMAIN-SUFFIX,aliyun.com),
        (DOMAIN-SUFFIX,jetbrains.com),
        (DOMAIN-SUFFIX,doorzo.cn),
        (DOMAIN-SUFFIX,cnblogs.com),
        (DOMAIN-SUFFIX,baimiaoapp.com),
        (DOMAIN-SUFFIX,baidu.com),
        (DOMAIN-SUFFIX,pan.baidu.com),
        (DOMAIN-SUFFIX,pcs.baidu.com),
        (DOMAIN-SUFFIX,maoken.com),
        (DOMAIN-SUFFIX,baidupcs.com)
      ),DIRECT

    # ç›´è¿æ­£åˆ™/å…³é”®è¯
    - OR,(
        (DOMAIN-KEYWORD,nicdrcom)
      ),DIRECT
    - OR,(
        (DOMAIN-REGEX,^cas\.guet\.edu\.cn(:\d+)?$),
        (DOMAIN-REGEX,\w{10}\.(adobe|adobestats)\.io)
      ),DIRECT

    # æ ¡å›­ç½‘ / æœ¬åœ° IP ç›´è¿
    - OR,(
        (IP-CIDR,10.0.1.5/32,no-resolve),
        (IP-CIDR,10.60.0.0/16,no-resolve),
        (IP-CIDR,10.70.0.0/16,no-resolve),
        (IP-CIDR,10.0.0.0/8,no-resolve),
        (IP-CIDR,172.16.0.0/12,no-resolve),
        (IP-CIDR,192.168.0.0/16,no-resolve),
        (IP-CIDR,127.0.0.0/8,no-resolve),
        (DOMAIN,localhost),
      ),DIRECT

    # ç›´è¿è§„åˆ™é›†
    - OR,(
        (RULE-SET,direct_domain),
        (RULE-SET,direct_non_ip),
        (RULE-SET,domestic_ip),
        (RULE-SET,domestic_non_ip),
        (RULE-SET,cn_icp)
      ),DIRECT


  ###############################################################
  # ä»£ç†è§„åˆ™
  ###############################################################
  PROXY-RULES:

    # ä»£ç†åŸŸå
    - OR,(
        (DOMAIN-SUFFIX,github.com),
        (DOMAIN-SUFFIX,githubusercontent.com),
        (DOMAIN-SUFFIX,githubassets.com),
        (DOMAIN-SUFFIX,github.io),
        (DOMAIN-SUFFIX,ghcr.io),
        (DOMAIN-SUFFIX,githubstatus.com),
        (DOMAIN-SUFFIX,githubcopilot.com),
        (DOMAIN-SUFFIX,fastly.net),
        (DOMAIN-SUFFIX,afdian.com),
        (DOMAIN-SUFFIX,trackerslist.com),
        (DOMAIN-SUFFIX,mikanani.me),
        (DOMAIN-SUFFIX,kox.moe),
        (DOMAIN-SUFFIX,annas-archive.org),
        (DOMAIN-SUFFIX,docs.rs),
        (DOMAIN-SUFFIX,dict.eudic.net)
      ),PROXY

    # è½¯ä»¶æº
    - OR,(
        (DOMAIN-SUFFIX,ubuntu.com),
        (DOMAIN-SUFFIX,archive.ubuntu.com),
        (DOMAIN-SUFFIX,security.ubuntu.com),
        (DOMAIN-SUFFIX,launchpad.net),
        (DOMAIN-SUFFIX,tsinghua.edu.cn)
      ),Download

    # ä»£ç†è§„åˆ™é›†
    - RULE-SET,ai_non_ip,AIGC

    - OR,(
        (RULE-SET,download_domainset),
        (RULE-SET,download_non_ip),
        (RULE-SET,cdn_non_ip),
        (RULE-SET,cdn_domainset)
      ),Download

    - OR,(
      (RULE-SET,telegram_ip),
      (RULE-SET,telegram_non_ip)
      ),Telegram

    - OR,(
        (RULE-SET,stream_ip),
        (RULE-SET,stream_non_ip)
      ),STREAM

  ###############################################################
  # æ‹¦æˆªå’Œé˜²æ³„æ¼
  ###############################################################
  # å¹¿å‘Šæ‹¦æˆª
  ADBLOCK-RULES:
    - OR,(
        (RULE-SET,ads_domain)
      ),AdBlock

  ###############################################################
  # HTTPDNS / DOH / DOT / DNS æ³„æ¼
  ###############################################################
  HTTPDNS-RULES:
    - OR,(
        (RULE-SET,blockhttpdns_ip,no-resolve),
        (RULE-SET,blockhttpdns_domain)
      ),HttpDNSBlock

  ###############################################################
  # WebRTC / STUN / TURN æ³„æ¼
  ###############################################################
  LEAK-RULES:
    - OR,(
        (RULE-SET,stun_domain),
        (AND,((NETWORK,TCP),(DST-PORT,5349))),
        (AND,((NETWORK,UDP),(DST-PORT,5350))),
        (AND,((NETWORK,UDP),(DST-PORT,5351))),
        (AND,((NETWORK,UDP),(DST-PORT,19302))),
        (DST-PORT,3478)
      ),LeakBlock
